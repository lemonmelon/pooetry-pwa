<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF8">
		<link href="https://fonts.googleapis.com/css?family=Caveat|Gamja+Flower|Indie+Flower|Neucha|Patrick+Hand|Permanent+Marker" rel="stylesheet"> 
		<style>
			label {
				display: block;
			}
			.label-text {
				width: 100px;
				display: inline-block;
			}
			.font-preview{
				padding: 15px;
				font-size: 2em;
			}
			
		</style>
	</head>
    <body>
		<label>
			<span class="label-text">Username </span>
			<input type="text" name="username">
		</label>
		<label>
			<span class="label-text">Font </span>
			<select name="font-selector">
				<option value="Gamja Flower"></option>
				<option value="Times New Roman"></option>
				<option value="Indie Flower"></option>
				<option value="Permanent Marker"></option>
				<option value="Caveat"></option>
				<option value="Patrick Hand"></option>
				<option value="Neucha"></option>
				
			</select>
		</label>
		
		<div class="font-preview">
			<span id="usernameDisplay"></span> is on the toilet
		</div>
		
			
		<button id="button">
			Get poopin' !
		</button>
		
		<script>
			if(localStorage.getItem("userSettings")){
				location.pathname = "/overview/";	
			}
		
			var knap = document.querySelector("#button");
			var usernameField = document.querySelector("input[name=username]");
			var fontSelector = document.querySelector("select[name=font-selector]");
			var usernameDisplay = document.querySelector("#usernameDisplay");
			var fontPreview = document.querySelector(".font-preview");
			
			knap.addEventListener("click", function(){
				localStorage.setItem("userSettings", JSON.stringify({
					username: usernameField.value, 
					font: fontSelector.value
				}));
				alert("Hey den er gemt");
				location.pathname = "/overview/";
				
			});
			
			for(i = 0; i < fontSelector.length ;i++){
				var option = fontSelector[i];
				option.innerText = option.value;
	
			}
			
			usernameField.addEventListener("keyup", function(){
				usernameDisplay.innerText = usernameField.value;
			})
			
			fontSelector.addEventListener("change", function(){
				fontPreview.setAttribute("style","font-family: '" + fontSelector.value + "';");
			})
		</script>
	
        <div>
			Todo:
			<ul>
				<li>
					Hvis du ikke har en bruger
					<ol>
						<li>Skriv navn: hvad skal vi kalde dig?</li>
						<li>VÃ¦lg skrifttype du vil bruge</li>
					</ol>
				</li>
				<li>
					Hvis du har en bruger
					<ol>
						<li>Send videre til oversigts-siden /overview/</li>
					</ol>
				</li>
			</ul>
		</div>
    </body>
</html>

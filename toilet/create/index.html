<!DOCTYPE html>
<html>
    <body>
		<label>
			Toilettets navn: <input type="text" name="toiletName">
		</label>
		<button>Opret</button>
	
		<script>
		var button = document.querySelector("button");
		var toiletNameField = document.querySelector("input[name=toiletName]");
		button.addEventListener("click",function(){
			
			var toiletName = toiletNameField.value;
			
			navigator.geolocation.getCurrentPosition(function(position) {
				fetch("http://localhost:5281/toilets", {
					method: "POST",
					body: JSON.stringify({
						name: toiletName,
						latitude: position.coords.latitude,
						longitude: position.coords.longitude
					}),
					headers: {"Content-Type":"application/json"}
				}).then(function(response){
					response.json().then((data) => {
					    document.location.href = "/toilet/?id=" + data.id;
                    });
				}).catch (function(error){
					console.error ("Failed to create toilet '" + toiletName + "'", error);
				});
		
			});
			
		})
		</script>
	
	
	
		<div>
        	Todo:
        	<ul>
            	<li>
                Oprettelse af toilet (udfyld formular, opret, send tilbage til oversigt /overview/)
            	</li>
        	</ul>
		</div>
    </body>
</html>

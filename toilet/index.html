<!DOCTYPE html>
<html>
    <body>
        <header>
            <h1></h1>
        </header>
        <section class="toilet-content">
            <div class="loading-indicator">Loading...</div>
        </section>
        <script>
            var heading = document.querySelector("header h1");
            var toiletContent = document.querySelector(".toilet-content");
            
            var id = document.location.search.match(/[?&]id=([^&]+)/)[1];

            fetch("https://pooetry-api.herokuapp.com/toilets/" + id).then(function(response) {
                return response.json();
            }).then(function(data) {
                heading.innerText = data.name;
                renderPosts(data.posts);
            }).catch(function(error) {
                console.error("Failed to load toilet", error);
            });

            function renderPosts(posts) {
                toiletContent.innerHTML = posts.map(function(post) {
                    return `
                        <div class="post">helo post ${post.content}</div>
                    `;
                });
            }
        </script>
    </body>
</html>
